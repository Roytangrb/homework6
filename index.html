<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script>
        (function(w, d, s, g, js, fs) {
            g = w.gapi || (w.gapi = {});
            g.analytics = {
                q: [],
                ready: function(f) {
                    this.q.push(f);
                }
            };
            js = d.createElement(s);
            fs = d.getElementsByTagName(s)[0];
            js.src = 'https://apis.google.com/js/platform.js';
            fs.parentNode.insertBefore(js, fs);
            js.onload = function() {
                g.load('analytics');
            };
        }(window, document, 'script'));
    </script>
    <title>Roy's Web GA Report</title>
</head>

<body>
    <div class="container">
        <div class="col-lg-12">
            <center>
                <h1 class="heading">Google Analytics Report on Previous Works</h1>
            </center>
            <div style="text-align:right">
                <h3 style="color:grey">Reports update everyday at 4p.m.</h3>
                <h3>By Roy Tang</h3>
                <h5>Tools:</h5>
                <a target="_blank" href="https://docs.google.com/spreadsheets/d/1_rR6M_LPQSuEKnABn0D5sva1UNbIkP3sNbPhzn_gtCM/edit?usp=sharing">View data reports on spreadsheets (GA add-ons)</a><br>
                <a target="_blank" href="https://developers.google.com/analytics/devguides/reporting/">Analystics Reporting API</a>
                <hr>
            </div>
        </div>
        <div class="row">
            <center>
                <table cellspacing="10">
                    <tr>
                        <th><span><a target="_blank" href="https://roytangrb.github.io/homework1">homework1&nbsp&nbsp&nbsp</a></span></th>
                        <th><span><a target="_blank" href="https://roytangrb.github.io/homework3">homework3&nbsp&nbsp&nbsp</a></span></th>
                        <th><span><a target="_blank" href="https://roytangrb.github.io/homework4">homework4&nbsp&nbsp&nbsp</a></span></th>
                        <th><span><a target="_blank" href="https://roytangrb.github.io/homework5">homework5&nbsp&nbsp&nbsp</a></span></th>
                        <th><span><a target="_blank" href="https://roytangrb.github.io">pitchsite&nbsp&nbsp&nbsp</a></span></th>
                    </tr>
                </table>
            </center>
            <br>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1_rR6M_LPQSuEKnABn0D5sva1UNbIkP3sNbPhzn_gtCM/pubchart?oid=1296851873&amp;format=interactive"></iframe>
            </div>
            <div class="col-lg-6">
                <h4>Websites visit peaks as promoted</h4>
                <p style="padding: 15 15 15 15px">After embeding the GA code onto all my websites, I use WeChat Moment function to promote my previous works, and sent those links to some whatsapp groups as well. As the graph could show, most of the vists are conducted as I promoted the
                    sites. The traffic dropped as my Moment Share flushed away by others friends' Momemt Share.</p>
                <ul style="padding: 15 15 15 15px">
                    <li>All sites have similar trend of of drop-in visitors</li>
                    <li>Drop-in visits occured periodically every one week's time</li>
                    <li>Overall, pitchsite has the most sessions in the last 30days, given it does not contain much information as other sites do</li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <p>decription2</p>
            </div>
            <div class="col-lg-6">
                <iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1_rR6M_LPQSuEKnABn0D5sva1UNbIkP3sNbPhzn_gtCM/pubchart?oid=1404056556&amp;format=interactive"></iframe>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <iframe width="600" height="371" seamless frameborder="0" scrolling="no" src="https://docs.google.com/spreadsheets/d/1_rR6M_LPQSuEKnABn0D5sva1UNbIkP3sNbPhzn_gtCM/pubchart?oid=221750944&amp;format=interactive"></iframe>
            </div>
            <div class="col-lg-6">
                <h4>Promotion sequence matters</h4>
                <p>While doing the promotion, I put the all the links in numerical order, resulting the relative high number of sessions and higher sessions duration. It could be inferred that people are more patient when visting the first site they received
                    from others, though the content is more boring and the user interface is not pleasant to read at all.</p><br>
                <p>In particular, I put the link of my pitch site in the last place, but people are still willing to click into and spent the most session duration on it. It could be resulting from people's mentality that they want more general information
                    regarding the creator rather than the content itself.</p>
            </div>
        </div>
        <div class="col-lg-12">
            <center>
                <div id="embed-api-auth-container"></div>
                <h4>Sign in your GA acount to view your own report</h4>
            </center>
        </div>
        <div class="col-lg-6">
            <div id="chart-container"></div>
            <div id="view-selector-container"></div>
        </div>
        <div class="col-lg-6">
            <div id="chart-1-container"></div>
            <div id="view-selector-1-container"></div>
        </div>
        <div class="col-lg-12">
            <div id="view-selector-container"></div>
            <div id="main-chart-container"></div>
            <div id="breakdown-chart-container"></div>
        </div>
    </div>
    <!--below are scripts-->
    <script>
        gapi.analytics.ready(function() {

            /**
             * Authorize the user immediately if the user has already granted access.
             * If no access has been created, render an authorize button inside the
             * element with the ID "embed-api-auth-container".
             */
            gapi.analytics.auth.authorize({
                container: 'embed-api-auth-container',
                clientid: '892773727748-sctbg4ma9cqp35tbl971r46n0sldlrd4.apps.googleusercontent.com'
            });


            /**
             * Create a new ViewSelector instance to be rendered inside of an
             * element with the id "view-selector-container".
             */
            var viewSelector = new gapi.analytics.ViewSelector({
                container: 'view-selector-container'
            });

            // Render the view selector to the page.
            viewSelector.execute();


            /**
             * Create a new DataChart instance with the given query parameters
             * and Google chart options. It will be rendered inside an element
             * with the id "chart-container".
             */
            var dataChart = new gapi.analytics.googleCharts.DataChart({
                query: {
                    metrics: 'ga:sessions',
                    dimensions: 'ga:date',
                    'start-date': '30daysAgo',
                    'end-date': 'yesterday'
                },
                chart: {
                    container: 'chart-container',
                    type: 'LINE',
                    options: {
                        width: '100%'
                    }
                }
            });


            /**
             * Render the dataChart on the page whenever a new view is selected.
             */
            viewSelector.on('change', function(ids) {
                dataChart.set({
                    query: {
                        ids: ids
                    }
                }).execute();
            });

        });
    </script>
    <script>
        gapi.analytics.ready(function() {

            /**
             * Authorize the user immediately if the user has already granted access.
             * If no access has been created, render an authorize button inside the
             * element with the ID "embed-api-auth-container".
             */
            gapi.analytics.auth.authorize({
                container: 'embed-api-auth-container',
                clientid: '892773727748-sctbg4ma9cqp35tbl971r46n0sldlrd4.apps.googleusercontent.com'
            });


            /**
             * Create a ViewSelector for the first view to be rendered inside of an
             * element with the id "view-selector-1-container".
             */
            var viewSelector1 = new gapi.analytics.ViewSelector({
                container: 'view-selector-1-container'
            });

            /**
             * Create a ViewSelector for the second view to be rendered inside of an
             * element with the id "view-selector-2-container".
             */

            // Render both view selectors to the page.
            viewSelector1.execute();


            /**
             * Create the first DataChart for top countries over the past 30 days.
             * It will be rendered inside an element with the id "chart-1-container".
             */
            var dataChart1 = new gapi.analytics.googleCharts.DataChart({
                query: {
                    metrics: 'ga:sessions',
                    dimensions: 'ga:country',
                    'start-date': '30daysAgo',
                    'end-date': 'yesterday',
                    'max-results': 6,
                    sort: '-ga:sessions'
                },
                chart: {
                    container: 'chart-1-container',
                    type: 'PIE',
                    options: {
                        width: '100%',
                        pieHole: 4 / 9
                    }
                }
            });



            /**
             * Update the first dataChart when the first view selecter is changed.
             */
            viewSelector1.on('change', function(ids) {
                dataChart1.set({
                    query: {
                        ids: ids
                    }
                }).execute();
            });

            /**
             * Update the second dataChart when the second view selecter is changed.
             */

        });
    </script>
    <script>
        gapi.analytics.ready(function() {

            /**
             * Authorize the user immediately if the user has already granted access.
             * If no access has been created, render an authorize button inside the
             * element with the ID "embed-api-auth-container".
             */
            gapi.analytics.auth.authorize({
                container: 'embed-api-auth-container',
                clientid: '892773727748-sctbg4ma9cqp35tbl971r46n0sldlrd4.apps.googleusercontent.com'
            });


            /**
             * Create a new ViewSelector instance to be rendered inside of an
             * element with the id "view-selector-container".
             */
            var viewSelector = new gapi.analytics.ViewSelector({
                container: 'view-selector-container'
            });

            // Render the view selector to the page.
            viewSelector.execute();

            /**
             * Create a table chart showing top browsers for users to interact with.
             * Clicking on a row in the table will update a second timeline chart with
             * data from the selected browser.
             */
            var mainChart = new gapi.analytics.googleCharts.DataChart({
                query: {
                    'dimensions': 'ga:browser',
                    'metrics': 'ga:sessions',
                    'sort': '-ga:sessions',
                    'max-results': '6'
                },
                chart: {
                    type: 'TABLE',
                    container: 'main-chart-container',
                    options: {
                        width: '100%'
                    }
                }
            });


            /**
             * Create a timeline chart showing sessions over time for the browser the
             * user selected in the main chart.
             */
            var breakdownChart = new gapi.analytics.googleCharts.DataChart({
                query: {
                    'dimensions': 'ga:date',
                    'metrics': 'ga:sessions',
                    'start-date': '7daysAgo',
                    'end-date': 'yesterday'
                },
                chart: {
                    type: 'LINE',
                    container: 'breakdown-chart-container',
                    options: {
                        width: '100%'
                    }
                }
            });


            /**
             * Store a refernce to the row click listener variable so it can be
             * removed later to prevent leaking memory when the chart instance is
             * replaced.
             */
            var mainChartRowClickListener;


            /**
             * Update both charts whenever the selected view changes.
             */
            viewSelector.on('change', function(ids) {
                var options = {
                    query: {
                        ids: ids
                    }
                };

                // Clean up any event listeners registered on the main chart before
                // rendering a new one.
                if (mainChartRowClickListener) {
                    google.visualization.events.removeListener(mainChartRowClickListener);
                }

                mainChart.set(options).execute();
                breakdownChart.set(options);

                // Only render the breakdown chart if a browser filter has been set.
                if (breakdownChart.get().query.filters) breakdownChart.execute();
            });


            /**
             * Each time the main chart is rendered, add an event listener to it so
             * that when the user clicks on a row, the line chart is updated with
             * the data from the browser in the clicked row.
             */
            mainChart.on('success', function(response) {

                var chart = response.chart;
                var dataTable = response.dataTable;

                // Store a reference to this listener so it can be cleaned up later.
                mainChartRowClickListener = google.visualization.events
                    .addListener(chart, 'select', function(event) {

                        // When you unselect a row, the "select" event still fires
                        // but the selection is empty. Ignore that case.
                        if (!chart.getSelection().length) return;

                        var row = chart.getSelection()[0].row;
                        var browser = dataTable.getValue(row, 0);
                        var options = {
                            query: {
                                filters: 'ga:browser==' + browser
                            },
                            chart: {
                                options: {
                                    title: browser
                                }
                            }
                        };

                        breakdownChart.set(options).execute();
                    });
            });

        });
    </script>
    <!--google-analytics tracking code-->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-96516045-6', 'auto');
        ga('send', 'pageview');
    </script>
</body>

</html>